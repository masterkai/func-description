"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Carousel=function(){function u(t,e,i,n,s,h,r){var a=this,c=7<arguments.length&&void 0!==arguments[7]?arguments[7]:2e3;_classCallCheck(this,u),this.carousel=t,this.imgContainer=e,this.leftBtn=i,this.rightBtn=n,this.images=s,this.thumbs=h,this.timeout=c,this.sliderSize=this.carousel.clientWidth,this.index=0,this.resizeTimer=null,this.circles=r,this.interval=setInterval(function(){a.run()},this.timeout),this.resetSize(),this.windowResize(),this.controller(),this.thumb(),this.initialActiveCircle()}return _createClass(u,[{key:"currentIndex",value:function(){return this.index}},{key:"thumb",value:function(){var i=this,n=this;this.thumbs.forEach(function(t,e){t.addEventListener("click",function(){n.index=e,i.changeImage(),i.resetInterval()})})}},{key:"controller",value:function(){var t=this,e=this;this.rightBtn.addEventListener("click",function(){e.index++,t.changeImage(),t.resetInterval(),t.addActiveCircle(t.index)}),this.leftBtn.addEventListener("click",function(){e.index--,t.changeImage(),t.resetInterval(),t.addActiveCircle(t.index)})}},{key:"initialActiveCircle",value:function(){this.circles&&this.circles[0].classList.add("active")}},{key:"addActiveCircle",value:function(t){this.circles.forEach(function(t){return t.classList.remove("active")}),this.circles[t].classList.add("active")}},{key:"windowResize",value:function(){var e=this;window.addEventListener("resize",function(t){e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.resetSize()},500)})}},{key:"resetSize",value:function(){var e=this;this.index=0,this.changeImage(),this.sliderSize=this.carousel.clientWidth,window.innerWidth<=500?this.images.forEach(function(t){return t.style.width="100%"}):this.images.forEach(function(t){return t.style.width=""+e.carousel.clientWidth})}},{key:"run",value:function(){this.index++,this.changeImage(),this.addActiveCircle(this.index)}},{key:"resetInterval",value:function(){var t=this;clearInterval(this.interval),this.interval=setInterval(function(){return t.run()},this.timeout)}},{key:"changeImage",value:function(){this.index>this.images.length-1?this.index=0:this.index<0&&(this.index=this.images.length-1),this.imgContainer.style.transform="translateX("+-this.index*this.sliderSize+"px)"}}]),u}(),Thumbs=function(){function h(t,e,i,n,s){_classCallCheck(this,h),this.carousel=t,this.thumbsContainer=e,this.prevBtn=i,this.nextBtn=n,this.thumbs=s,this.thumbSize=void 0,this.thumbIndex=0,this.resizeTimer=null,this.resetSize(),this.windowResize(),this.controller()}return _createClass(h,[{key:"resetSize",value:function(){var e=this;this.thumbs.forEach(function(t){return t.style.width=e.carousel.clientWidth/5-16+"px"}),this.thumbIndex=0,this.thumbSize=carousel.clientWidth,this.changeThumb()}},{key:"changeThumb",value:function(){this.thumbs.length<=5?this.thumbIndex=0:this.thumbIndex>this.thumbs.length/(this.thumbs.length/2)-1?this.thumbIndex=0:this.thumbIndex<0&&(this.thumbIndex=this.thumbs.length/(this.thumbs.length/2)-1),this.thumbsContainer.style.transform="translateX("+-this.thumbIndex*this.thumbSize+"px)"}},{key:"controller",value:function(){var t=this;this.nextBtn.addEventListener("click",function(){t.thumbIndex++,t.changeThumb()}),this.prevBtn.addEventListener("click",function(){t.thumbIndex--,t.changeThumb()})}},{key:"windowResize",value:function(){var e=this;window.addEventListener("resize",function(t){e.resizeTimer&&clearTimeout(e.resizeTimer),e.resizeTimer=setTimeout(function(){e.resetSize()},500)})}}]),h}(),Circle=function t(){_classCallCheck(this,t)};
"use strict";var _createClass=function(){function n(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var YouTubeModal=function(){function n(e,t,a){_classCallCheck(this,n),this.videoId=e,this.playerId=t,this.playBtn=document.getElementById(a)?document.getElementById(a):null,this.player=void 0,this.onPlayerReady=this.onPlayerReady.bind(this),this.mountYouTubeApi(),this.controller()}return _createClass(n,[{key:"mountYouTubeApi",value:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}},{key:"createModalBody",value:function(){return'\n        <div class="Empy-modal-header Empy-modal-header--noContentOnlyCloseBtn"><button class="btn btn-empy-link closeBtn"></button></div>\n        <div class="Empy-modal-body">\n            <div id="'+this.playerId+'"></div>            \n        </div>'}},{key:"controller",value:function(){var e=this,t=document.createElement("div");t.className="Empy-mask";var a=document.createElement("div");a.className="Empy-modal",t.appendChild(a),this.playBtn&&this.playBtn.addEventListener("click",function(){a.textContent="",a.className="Empy-modal Empy-modal--youtube",a.insertAdjacentHTML("afterbegin",e.createModalBody()),document.body.insertAdjacentElement("afterbegin",t),document.querySelector(".closeBtn").addEventListener("click",function(){t.classList.remove("show"),e.pauseVideo()}),t.classList.add("show"),e.onYouTubeIframeAPIReady()})}},{key:"onYouTubeIframeAPIReady",value:function(){this.player=new YT.Player(this.playerId,{height:"315",width:"560",videoId:this.videoId,playerVars:{rel:0,showinfo:0,ecver:2},events:{onStateChange:this.onPlayerStateChange,onReady:this.onPlayerReady}})}},{key:"onPlayerReady",value:function(){console.log("video player is ready"),this.activateVideo()}},{key:"onPlayerStateChange",value:function(e){e.data==YT.PlayerState.PLAYING?console.log("player is playing"):console.log("player is not playing")}},{key:"stopVideo",value:function(){this.player.stopVideo()}},{key:"activateVideo",value:function(){this.player.playVideo()}},{key:"pauseVideo",value:function(){console.log("pause the video player and close the video modal."),this.player.pauseVideo()}}]),n}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNhcm91c2VsLmpzIiwiWW91dHViZU1vZGFsLmpzIl0sIm5hbWVzIjpbIkNhcm91c2VsIiwiY2Fyb3VzZWwiLCJpbWdDb250YWluZXIiLCJsZWZ0QnRuIiwicmlnaHRCdG4iLCJpbWFnZXMiLCJ0aHVtYnMiLCJjaXJjbGVzIiwiX3RoaXMiLCJ0aGlzIiwidGltZW91dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjayIsInNsaWRlclNpemUiLCJjbGllbnRXaWR0aCIsInJlc2l6ZVRpbWVyIiwiaW5kZXgiLCJ3aW5kb3dSZXNpemUiLCJjb250cm9sbGVyIiwidGh1bWIiLCJmb3JFYWNoIiwiaXRlbSIsImkiLCJhZGRFdmVudExpc3RlbmVyIiwidGhhdCIsIl90aGlzMiIsImluaXRpYWxBY3RpdmVDaXJjbGUiLCJyZXNldEludGVydmFsIiwiX3RoaXMzIiwiY2hhbmdlSW1hZ2UiLCJhZGRBY3RpdmVDaXJjbGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJ3aW5kb3ciLCJldmVudCIsImNsZWFyVGltZW91dCIsInJlc2V0U2l6ZSIsIl90aGlzNCIsImlubmVyV2lkdGgiLCJpbWFnZSIsInN0eWxlIiwid2lkdGgiLCJfdGhpczUiLCJydW4iLCJ0cmFuc2Zvcm0iLCJUaHVtYnMiLCJwcmV2QnRuIiwibmV4dEJ0biIsInRodW1ic0NvbnRhaW5lciIsInRodW1iU2l6ZSIsInRodW1iSW5kZXgiLCJfdGhpczYiLCJjaGFuZ2VUaHVtYiIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJDaXJjbGUiLCJZb3VUdWJlTW9kYWwiLCJ2aWRlb0lkIiwicGxheWVySWQiLCJwbGF5QnRuIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInBsYXllciIsIm9uUGxheWVyUmVhZHkiLCJiaW5kIiwibW91bnRZb3VUdWJlQXBpIiwidGFnIiwic3JjIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJmaXJzdFNjcmlwdFRhZyIsInBhcmVudE5vZGUiLCJpbnNlcnRCZWZvcmUiLCJtYXNrIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIm1vZGFsIiwiYXBwZW5kQ2hpbGQiLCJ0ZXh0Q29udGVudCIsImNyZWF0ZU1vZGFsQm9keSIsImJvZHkiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJwYXVzZVZpZGVvIiwiaGVpZ2h0Iiwib25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkiLCJwbGF5ZXJWYXJzIiwicmVsIiwic2hvd2luZm8iLCJlY3ZlciIsImV2ZW50cyIsIm9uU3RhdGVDaGFuZ2UiLCJvblBsYXllclN0YXRlQ2hhbmdlIiwib25SZWFkeSIsImRhdGEiLCJZVCIsIlBsYXllclN0YXRlIiwiUExBWUlORyIsImNvbnNvbGUiLCJsb2ciLCJzdG9wVmlkZW8iXSwibWFwcGluZ3MiOiJpWUFBTUEsb0JBQ0osU0FBQUEsRUFBWUMsRUFBVUMsRUFBY0MsRUFBU0MsRUFBVUMsRUFBUUMsRUFBUUMsR0FBeUIsSUFBQUMsRUFBQUMsS0FBaEJDLEVBQWdCLEVBQUFDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFOLElBQU1HLGdCQUFBTCxLQUFBVCxHQUM5RlMsS0FBS1IsU0FBV0EsRUFDaEJRLEtBQUtQLGFBQWVBLEVBQ3BCTyxLQUFLTixRQUFVQSxFQUNmTSxLQUFLTCxTQUFXQSxFQUxkSixLQUFBQSxPQU1ZSyxFQUxoQkksS0FBQUgsT0FBQUEsRUFBZ0dHLEtBQUFDLFFBQUFBLEVBUTlGRCxLQUFLTSxXQUFhTixLQUFLUixTQUFTZSxZQVI4RFAsS0FBaEJDLE1BQWdCLEVBVTlGRCxLQUFLUSxZQUFjLEtBVjJFUixLQUFBRixRQUFBQSxFQUM5RkUsS0FBS1IsU0FBV0EsWUFBaEIsV0FDQU8sRUFBS04sT0FFTE8sS0FBS0wsU0FDTEssS0FBS0osWUFDTEksS0FBS0gsZUFDTEcsS0FBS0MsYUFDTEQsS0FBS00sUUFHTE4sS0FBS0Ysa0ZBSUgsT0FBQUUsS0FBQVMsc0NBR0dDLElBQUFBLEVBQUFBLEtBQ0FDLEVBQUFBLEtB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WSxhQUNsQkYsRUFBS0ksWUFBWUQsR0FFakJyRSxLQUFLcUQsU0FBV3JELEtBQUtxRCxRQUFRckMsaUJBQWlCLFFBQVMsV0FSdkRxRCxFQUFBRSxZQUFBLEdBQ0FGLEVBQU1ILFVBQU9aLGlDQUNiWSxFQUFLRSxtQkFBWSxhQUFqQnJFLEVBQUF5RSxtQkFDQWxCLFNBQUFtQixLQUFBQyxzQkFBQSxhQUFBUixHQUNjWixTQUFTYSxjQUFULGFBQ1JDLGlCQUFZLFFBQWxCLFdBQ0FGLEVBQUtJLFVBQVlELE9BQWpCLFFBVUl0RSxFQUFLNEUsZUFQUE4sRUFBQUEsVUFBTUUsSUFBTixRQUNBRixFQUFBQSw4RUFNRXJFLEtBQUF3RCxPQUFLbUIsSUFBQUEsR0FBQUEsT0FBTDNFLEtBQUFvRCxTQUFBLENBQ0R3QixPQUhELE1BSUFWLE1BQUsxQyxNQUNMMkIsUUFBSzBCLEtBQUFBLFFBRU5DLFdBYkQsQ0FBQUMsSUFBQSxFQUFBQyxTQUFBLEVBQUFDLE1BQUEsR0FjREMsT0FBQSxDQVNLQyxjQUFpQm5GLEtBQUtvRixvQkFDdEJDLFFBQVdyRixLQUFLeUQseURBSGxCcUIsUUFBQUEsSUFBQUEseUJBQ0FJLEtBQUFBLDREQUFRdEQsR0FMVkEsRUFBQTBELE1BQUFDLEdBQUFDLFlBQUFDLFFBVURDLFFBQUFDLElBQUEscUJBV0dELFFBQVFDLElBQUksNkRBS2QzRixLQUFLd0QsT0FBT29DLG9EQVBWRixLQUFBQSxPQUFRQyxpREFJWEQsUUFBQUMsSUFBQSxxREFZQzNGLEtBQUt3RCxPQUFPbUIiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBDYXJvdXNlbCB7XHJcbiAgY29uc3RydWN0b3IoY2Fyb3VzZWwsIGltZ0NvbnRhaW5lciwgbGVmdEJ0biwgcmlnaHRCdG4sIGltYWdlcywgdGh1bWJzLCBjaXJjbGVzLCB0aW1lb3V0ID0gMjAwMCkge1xyXG4gICAgdGhpcy5jYXJvdXNlbCA9IGNhcm91c2VsXHJcbiAgICB0aGlzLmltZ0NvbnRhaW5lciA9IGltZ0NvbnRhaW5lclxyXG4gICAgdGhpcy5sZWZ0QnRuID0gbGVmdEJ0blxyXG4gICAgdGhpcy5yaWdodEJ0biA9IHJpZ2h0QnRuXHJcbiAgICB0aGlzLmltYWdlcyA9IGltYWdlc1xyXG4gICAgdGhpcy50aHVtYnMgPSB0aHVtYnNcclxuICAgIHRoaXMudGltZW91dCA9IHRpbWVvdXRcclxuICAgIHRoaXMuc2xpZGVyU2l6ZSA9IHRoaXMuY2Fyb3VzZWwuY2xpZW50V2lkdGhcclxuICAgIHRoaXMuaW5kZXggPSAwXHJcbiAgICB0aGlzLnJlc2l6ZVRpbWVyID0gbnVsbFxyXG4gICAgdGhpcy5jaXJjbGVzID0gY2lyY2xlc1xyXG4gICAgLy8gdGhpcy5wYWdpbmF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBhZ2luYXRpb24gLmNpcmNsZScpXHJcbiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG4gICAgICB0aGlzLnJ1bigpXHJcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3VycmVudEluZGV4KCkpO1xyXG4gICAgfSwgdGhpcy50aW1lb3V0KVxyXG4gICAgdGhpcy5yZXNldFNpemUoKVxyXG4gICAgdGhpcy53aW5kb3dSZXNpemUoKVxyXG4gICAgdGhpcy5jb250cm9sbGVyKClcclxuICAgIHRoaXMudGh1bWIoKVxyXG4gICAgLy8gdGhpcy5jcmVhdGVDaXJjbGUoKVxyXG4gICAgLy8gdGhpcy5hZGRBY3RpdmVDaXJjbGUoKVxyXG4gICAgdGhpcy5pbml0aWFsQWN0aXZlQ2lyY2xlKClcclxuICB9XHJcbiAgY3VycmVudEluZGV4KCkge1xyXG4gICAgLy8gY29uc29sZS5sb2codGhpcy5pbmRleCk7XHJcbiAgICByZXR1cm4gdGhpcy5pbmRleFxyXG4gIH1cclxuXHJcbiAgdGh1bWIoKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG4gICAgdGhpcy50aHVtYnMuZm9yRWFjaCgoaXRlbSwgaSkgPT4ge1xyXG4gICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgIHRoYXQuaW5kZXggPSBpXHJcbiAgICAgICAgdGhpcy5jaGFuZ2VJbWFnZSgpXHJcbiAgICAgICAgdGhpcy5yZXNldEludGVydmFsKClcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjb250cm9sbGVyKCkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuICAgIHRoaXMucmlnaHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoYXQuaW5kZXgrK1xyXG4gICAgICB0aGlzLmNoYW5nZUltYWdlKClcclxuICAgICAgdGhpcy5yZXNldEludGVydmFsKClcclxuICAgICAgdGhpcy5hZGRBY3RpdmVDaXJjbGUodGhpcy5pbmRleClcclxuICAgIH0pXHJcbiAgICB0aGlzLmxlZnRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoYXQuaW5kZXgtLVxyXG4gICAgICB0aGlzLmNoYW5nZUltYWdlKClcclxuICAgICAgdGhpcy5yZXNldEludGVydmFsKClcclxuICAgICAgdGhpcy5hZGRBY3RpdmVDaXJjbGUodGhpcy5pbmRleClcclxuICAgIH0pXHJcblxyXG4gIH1cclxuXHJcbiAgaW5pdGlhbEFjdGl2ZUNpcmNsZSgpe1xyXG4gICAgaWYodGhpcy5jaXJjbGVzKXtcclxuICAgICAgdGhpcy5jaXJjbGVzWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhZGRBY3RpdmVDaXJjbGUoaW5kZXgpIHtcclxuXHJcbiAgICB0aGlzLmNpcmNsZXMuZm9yRWFjaChpdGVtID0+IGl0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJykpXHJcbiAgICB0aGlzLmNpcmNsZXNbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgfVxyXG5cclxuICB3aW5kb3dSZXNpemUoKSB7XHJcbiAgICBjb25zdCB0aGF0ID0gdGhpc1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICBpZiAodGhhdC5yZXNpemVUaW1lcikgY2xlYXJUaW1lb3V0KHRoYXQucmVzaXplVGltZXIpO1xyXG4gICAgICB0aGF0LnJlc2l6ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgdGhhdC5yZXNldFNpemUoKVxyXG4gICAgICB9LCA1MDApXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcmVzZXRTaXplKCkge1xyXG4gICAgdGhpcy5pbmRleCA9IDBcclxuICAgIHRoaXMuY2hhbmdlSW1hZ2UoKVxyXG4gICAgdGhpcy5zbGlkZXJTaXplID0gdGhpcy5jYXJvdXNlbC5jbGllbnRXaWR0aFxyXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDUwMCkge1xyXG4gICAgICB0aGlzLmltYWdlcy5mb3JFYWNoKGltYWdlID0+IGltYWdlLnN0eWxlLndpZHRoID0gJzEwMCUnKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5pbWFnZXMuZm9yRWFjaChpbWFnZSA9PiBpbWFnZS5zdHlsZS53aWR0aCA9IGAke3RoaXMuY2Fyb3VzZWwuY2xpZW50V2lkdGh9YClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJ1bigpIHtcclxuICAgIHRoaXMuaW5kZXgrK1xyXG4gICAgdGhpcy5jaGFuZ2VJbWFnZSgpXHJcbiAgICB0aGlzLmFkZEFjdGl2ZUNpcmNsZSh0aGlzLmluZGV4KVxyXG4gIH1cclxuXHJcbiAgcmVzZXRJbnRlcnZhbCgpIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKCdpbnRlcnZhbCBoYXMgYmVlbiByZXNldCEhJyk7XHJcbiAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpXHJcbiAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gdGhpcy5ydW4oKSwgdGhpcy50aW1lb3V0KVxyXG4gIH1cclxuXHJcbiAgY2hhbmdlSW1hZ2UoKSB7XHJcbiAgICBpZiAodGhpcy5pbmRleCA+IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgdGhpcy5pbmRleCA9IDBcclxuICAgIH0gZWxzZSBpZiAodGhpcy5pbmRleCA8IDApIHtcclxuICAgICAgdGhpcy5pbmRleCA9IHRoaXMuaW1hZ2VzLmxlbmd0aCAtIDFcclxuICAgIH1cclxuICAgIHRoaXMuaW1nQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LXRoaXMuaW5kZXggKiB0aGlzLnNsaWRlclNpemV9cHgpYFxyXG4gIH1cclxufVxyXG5cclxuY2xhc3MgVGh1bWJzIHtcclxuICBjb25zdHJ1Y3RvcihjYXJvdXNlbCwgdGh1bWJzQ29udGFpbmVyLCBwcmV2QnRuLCBuZXh0QnRuLCB0aHVtYnMpIHtcclxuICAgIHRoaXMuY2Fyb3VzZWwgPSBjYXJvdXNlbFxyXG4gICAgdGhpcy50aHVtYnNDb250YWluZXIgPSB0aHVtYnNDb250YWluZXJcclxuICAgIHRoaXMucHJldkJ0biA9IHByZXZCdG5cclxuICAgIHRoaXMubmV4dEJ0biA9IG5leHRCdG5cclxuICAgIHRoaXMudGh1bWJzID0gdGh1bWJzXHJcbiAgICB0aGlzLnRodW1iU2l6ZSA9IHVuZGVmaW5lZFxyXG4gICAgdGhpcy50aHVtYkluZGV4ID0gMFxyXG4gICAgdGhpcy5yZXNpemVUaW1lciA9IG51bGxcclxuICAgIHRoaXMucmVzZXRTaXplKClcclxuICAgIHRoaXMud2luZG93UmVzaXplKClcclxuICAgIHRoaXMuY29udHJvbGxlcigpXHJcbiAgfVxyXG5cclxuICByZXNldFNpemUoKSB7XHJcbiAgICB0aGlzLnRodW1icy5mb3JFYWNoKHRodW1iID0+IHRodW1iLnN0eWxlLndpZHRoID0gYCR7KHRoaXMuY2Fyb3VzZWwuY2xpZW50V2lkdGggLyA1KSAtIDE2fXB4YClcclxuICAgIHRoaXMudGh1bWJJbmRleCA9IDBcclxuICAgIHRoaXMudGh1bWJTaXplID0gY2Fyb3VzZWwuY2xpZW50V2lkdGhcclxuICAgIHRoaXMuY2hhbmdlVGh1bWIoKVxyXG4gIH1cclxuXHJcbiAgY2hhbmdlVGh1bWIoKSB7XHJcbiAgICBpZiAodGhpcy50aHVtYnMubGVuZ3RoIDw9IDUpIHtcclxuICAgICAgdGhpcy50aHVtYkluZGV4ID0gMFxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaWYgKHRoaXMudGh1bWJJbmRleCA+ICh0aGlzLnRodW1icy5sZW5ndGggLyAodGhpcy50aHVtYnMubGVuZ3RoIC8gMikpIC0gMSkge1xyXG4gICAgICAgIHRoaXMudGh1bWJJbmRleCA9IDBcclxuICAgICAgfSBlbHNlIGlmICh0aGlzLnRodW1iSW5kZXggPCAwKSB7XHJcbiAgICAgICAgdGhpcy50aHVtYkluZGV4ID0gKHRoaXMudGh1bWJzLmxlbmd0aCAvICh0aGlzLnRodW1icy5sZW5ndGggLyAyKSkgLSAxXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHRoaXMudGh1bWJzQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKCR7LXRoaXMudGh1bWJJbmRleCAqIHRoaXMudGh1bWJTaXplfXB4KWBcclxuICB9XHJcblxyXG4gIGNvbnRyb2xsZXIoKXtcclxuICAgIGNvbnN0IHRoYXQgPSB0aGlzXHJcbiAgICB0aGlzLm5leHRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoYXQudGh1bWJJbmRleCsrXHJcbiAgICAgIHRoYXQuY2hhbmdlVGh1bWIoKVxyXG4gICAgfSlcclxuICAgIHRoaXMucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhhdC50aHVtYkluZGV4LS1cclxuICAgICAgdGhhdC5jaGFuZ2VUaHVtYigpXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgd2luZG93UmVzaXplKCkge1xyXG4gICAgY29uc3QgdGhhdCA9IHRoaXNcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgaWYgKHRoYXQucmVzaXplVGltZXIpIGNsZWFyVGltZW91dCh0aGF0LnJlc2l6ZVRpbWVyKTtcclxuICAgICAgdGhhdC5yZXNpemVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoYXQucmVzZXRTaXplKClcclxuICAgICAgfSwgNTAwKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG59XHJcblxyXG5jbGFzcyBDaXJjbGUge1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICB9XHJcbn0iLCJjbGFzcyBZb3VUdWJlTW9kYWwge1xyXG4gIGNvbnN0cnVjdG9yKHZpZGVvSWQsIHBsYXllcklkLCBwbGF5QnRuKSB7XHJcbiAgICB0aGlzLnZpZGVvSWQgPSB2aWRlb0lkXHJcbiAgICB0aGlzLnBsYXllcklkID0gcGxheWVySWRcclxuICAgIHRoaXMucGxheUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHBsYXlCdG4pID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQocGxheUJ0bikgOiBudWxsXHJcbiAgICB0aGlzLnBsYXllciA9IHVuZGVmaW5lZFxyXG4gICAgdGhpcy5vblBsYXllclJlYWR5ID0gdGhpcy5vblBsYXllclJlYWR5LmJpbmQodGhpcylcclxuICAgIHRoaXMubW91bnRZb3VUdWJlQXBpKClcclxuICAgIHRoaXMuY29udHJvbGxlcigpXHJcbiAgfVxyXG5cclxuXHJcbiAgbW91bnRZb3VUdWJlQXBpKCkge1xyXG4gICAgY29uc3QgdGFnID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICB0YWcuc3JjID0gXCJodHRwczovL3d3dy55b3V0dWJlLmNvbS9pZnJhbWVfYXBpXCJcclxuXHJcbiAgICBjb25zdCBmaXJzdFNjcmlwdFRhZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTtcclxuICAgIGZpcnN0U2NyaXB0VGFnLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRhZywgZmlyc3RTY3JpcHRUYWcpO1xyXG4gIH1cclxuXHJcbiAgY3JlYXRlTW9kYWxCb2R5KCkge1xyXG4gICAgcmV0dXJuIGBcclxuICAgICAgICA8ZGl2IGNsYXNzPVwiRW1weS1tb2RhbC1oZWFkZXIgRW1weS1tb2RhbC1oZWFkZXItLW5vQ29udGVudE9ubHlDbG9zZUJ0blwiPjxidXR0b24gY2xhc3M9XCJidG4gYnRuLWVtcHktbGluayBjbG9zZUJ0blwiPjwvYnV0dG9uPjwvZGl2PlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJFbXB5LW1vZGFsLWJvZHlcIj5cclxuICAgICAgICAgICAgPGRpdiBpZD1cIiR7dGhpcy5wbGF5ZXJJZH1cIj48L2Rpdj4gICAgICAgICAgICBcclxuICAgICAgICA8L2Rpdj5gXHJcbiAgfVxyXG5cclxuICBjb250cm9sbGVyKCkge1xyXG4gICAgLy8gQ3JlYXRlIEVtcHktbWFzayAmIEVtcHktbW9kYWxcclxuICAgIGNvbnN0IG1hc2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgbWFzay5jbGFzc05hbWUgPSBcIkVtcHktbWFza1wiXHJcbiAgICAvLyBtYXNrLnNldEF0dHJpYnV0ZSgnZGF0YS1yZXZlYWwnLCBudWxsKVxyXG4gICAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgbW9kYWwuY2xhc3NOYW1lID0gXCJFbXB5LW1vZGFsXCJcclxuICAgIG1hc2suYXBwZW5kQ2hpbGQobW9kYWwpXHJcblxyXG4gICAgdGhpcy5wbGF5QnRuICYmIHRoaXMucGxheUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgbW9kYWwudGV4dENvbnRlbnQgPSAnJ1xyXG4gICAgICBtb2RhbC5jbGFzc05hbWUgPSBcIkVtcHktbW9kYWwgRW1weS1tb2RhbC0teW91dHViZVwiXHJcbiAgICAgIG1vZGFsLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJiZWdpbicsIHRoaXMuY3JlYXRlTW9kYWxCb2R5KCkpXHJcbiAgICAgIGRvY3VtZW50LmJvZHkuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KCdhZnRlcmJlZ2luJywgbWFzaylcclxuICAgICAgY29uc3QgY2xvc2VCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2xvc2VCdG4nKVxyXG4gICAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBtYXNrLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxyXG4gICAgICAgIHRoaXMucGF1c2VWaWRlbygpO1xyXG4gICAgICB9KVxyXG4gICAgICBtYXNrLmNsYXNzTGlzdC5hZGQoJ3Nob3cnKVxyXG4gICAgICB0aGlzLm9uWW91VHViZUlmcmFtZUFQSVJlYWR5KClcclxuXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgb25Zb3VUdWJlSWZyYW1lQVBJUmVhZHkoKSB7XHJcbiAgICB0aGlzLnBsYXllciA9IG5ldyBZVC5QbGF5ZXIodGhpcy5wbGF5ZXJJZCwge1xyXG4gICAgICBoZWlnaHQ6ICczMTUnLFxyXG4gICAgICB3aWR0aDogJzU2MCcsXHJcbiAgICAgIHZpZGVvSWQ6IHRoaXMudmlkZW9JZCxcclxuICAgICAgcGxheWVyVmFyczoge3JlbDogMCwgc2hvd2luZm86IDAsIGVjdmVyOiAyfSxcclxuICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgJ29uU3RhdGVDaGFuZ2UnOiB0aGlzLm9uUGxheWVyU3RhdGVDaGFuZ2UsXHJcbiAgICAgICAgJ29uUmVhZHknOiB0aGlzLm9uUGxheWVyUmVhZHksXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25QbGF5ZXJSZWFkeSgpIHtcclxuICAgIGNvbnNvbGUubG9nKCd2aWRlbyBwbGF5ZXIgaXMgcmVhZHknKTtcclxuICAgIHRoaXMuYWN0aXZhdGVWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgb25QbGF5ZXJTdGF0ZUNoYW5nZShldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LmRhdGEgPT0gWVQuUGxheWVyU3RhdGUuUExBWUlORykge1xyXG4gICAgICBjb25zb2xlLmxvZygncGxheWVyIGlzIHBsYXlpbmcnKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdwbGF5ZXIgaXMgbm90IHBsYXlpbmcnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHN0b3BWaWRlbygpIHtcclxuICAgIHRoaXMucGxheWVyLnN0b3BWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgYWN0aXZhdGVWaWRlbygpIHtcclxuICAgIHRoaXMucGxheWVyLnBsYXlWaWRlbygpO1xyXG4gIH1cclxuXHJcbiAgcGF1c2VWaWRlbygpIHtcclxuICAgIGNvbnNvbGUubG9nKCdwYXVzZSB0aGUgdmlkZW8gcGxheWVyIGFuZCBjbG9zZSB0aGUgdmlkZW8gbW9kYWwuJyk7XHJcbiAgICB0aGlzLnBsYXllci5wYXVzZVZpZGVvKCk7XHJcbiAgfVxyXG5cclxufSJdfQ==
